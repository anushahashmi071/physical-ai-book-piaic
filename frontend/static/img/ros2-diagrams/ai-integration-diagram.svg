<svg width="900" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-size="16" font-weight="bold">AI Agent Integration with ROS 2</text>

  <!-- Python AI Agent Box -->
  <rect x="50" y="100" width="180" height="120" rx="10" ry="10" fill="#9C27B0" stroke="#4A148C" stroke-width="2"/>
  <text x="140" y="125" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Python AI Agent</text>
  <text x="140" y="145" text-anchor="middle" fill="white" font-size="10">TensorFlow/PyTorch</text>
  <text x="140" y="160" text-anchor="middle" fill="white" font-size="10">Algorithms</text>
  <text x="140" y="175" text-anchor="middle" fill="white" font-size="10">rclpy Interface</text>

  <!-- rclpy Bridge -->
  <rect x="280" y="140" width="100" height="40" rx="5" ry="5" fill="#FF9800" stroke="#E65100" stroke-width="2"/>
  <text x="330" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="bold">rclpy</text>
  <text x="330" y="175" text-anchor="middle" fill="white" font-size="9">Bridge</text>

  <!-- ROS 2 Network -->
  <rect x="430" y="80" width="400" height="340" rx="15" ry="15" fill="#E3F2FD" stroke="#1565C0" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="630" y="100" text-anchor="middle" fill="#1565C0" font-size="12" font-weight="bold">ROS 2 Network</text>

  <!-- ROS 2 Nodes -->
  <rect x="460" y="140" width="120" height="60" rx="8" ry="8" fill="#2196F3" stroke="#0D47A1" stroke-width="2"/>
  <text x="520" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Sensor Node</text>
  <text x="520" y="180" text-anchor="middle" fill="white" font-size="9">LiDAR/Camera</text>

  <rect x="460" y="240" width="120" height="60" rx="8" ry="8" fill="#4CAF50" stroke="#2E7D32" stroke-width="2"/>
  <text x="520" y="265" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Control Node</text>
  <text x="520" y="280" text-anchor="middle" fill="white" font-size="9">Motors/Actuators</text>

  <rect x="650" y="140" width="120" height="60" rx="8" ry="8" fill="#FF5722" stroke="#BF360C" stroke-width="2"/>
  <text x="710" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Planning Node</text>
  <text x="710" y="180" text-anchor="middle" fill="white" font-size="9">Path Planning</text>

  <rect x="650" y="240" width="120" height="60" rx="8" ry="8" fill="#9E9E9E" stroke="#424242" stroke-width="2"/>
  <text x="710" y="265" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Navigation Node</text>
  <text x="710" y="280" text-anchor="middle" fill="white" font-size="9">Autonomous Nav</text>

  <!-- Communication Arrows -->
  <!-- From AI Agent to rclpy -->
  <line x1="230" y1="160" x2="280" y2="160" stroke="#212121" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="255" y="150" text-anchor="middle" fill="#212121" font-size="9">Commands</text>

  <!-- From rclpy to ROS Network -->
  <line x1="380" y1="160" x2="460" y2="160" stroke="#212121" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="420" y="150" text-anchor="middle" fill="#212121" font-size="9">Messages</text>

  <!-- AI to Control Node (via ROS) -->
  <line x1="230" y1="160" x2="380" y2="160" stroke="#212121" stroke-width="0" />
  <line x1="380" y1="160" x2="460" y2="270" stroke="#212121" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="410" y="220" text-anchor="middle" fill="#212121" font-size="8">Control Cmds</text>

  <!-- Sensor Data to AI (via ROS) -->
  <line x1="460" y1="170" x2="380" y2="170" stroke="#212121" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead2)"/>
  <line x1="380" y1="170" x2="230" y2="170" stroke="#212121" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead2)"/>
  <text x="305" y="160" text-anchor="middle" fill="#212121" font-size="8">Sensor Data</text>

  <!-- Arrowhead definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#212121"/>
    </marker>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7"
            refX="0" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#212121"/>
    </marker>
  </defs>

  <!-- Data Flow Labels -->
  <text x="140" y="240" text-anchor="middle" fill="#4A148C" font-size="10" font-weight="bold">AI Processing</text>
  <text x="140" y="255" text-anchor="middle" fill="#4A148C" font-size="9">Perception → Decision → Action</text>

  <text x="630" y="400" text-anchor="middle" fill="#1565C0" font-size="10" font-weight="bold">ROS 2 Ecosystem</text>
  <text x="630" y="415" text-anchor="middle" fill="#1565C0" font-size="9">Distributed Nodes and Communication</text>

  <!-- Legend -->
  <rect x="50" y="380" width="300" height="80" fill="none" stroke="#BDBDBD" stroke-width="1"/>
  <rect x="70" y="400" width="15" height="15" fill="#9C27B0" stroke="#4A148C" stroke-width="1"/>
  <text x="95" y="410" fill="#212121" font-size="9">AI Agent (Python)</text>

  <rect x="70" y="420" width="15" height="15" fill="#FF9800" stroke="#E65100" stroke-width="1"/>
  <text x="95" y="430" fill="#212121" font-size="9">rclpy Bridge</text>

  <rect x="220" y="400" width="15" height="15" fill="#2196F3" stroke="#0D47A1" stroke-width="1"/>
  <text x="245" y="410" fill="#212121" font-size="9">ROS 2 Nodes</text>

  <line x1="220" y1="420" x2="235" y2="420" stroke="#212121" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="245" y="423" fill="#212121" font-size="9">ROS Messaging</text>
</svg>