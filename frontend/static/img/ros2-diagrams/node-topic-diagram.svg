<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="16" font-weight="bold">ROS 2 Node-Topic Communication</text>

  <!-- Publisher Node -->
  <rect x="100" y="100" width="120" height="80" rx="10" ry="10" fill="#4CAF50" stroke="#2E7D32" stroke-width="2"/>
  <text x="160" y="125" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Sensor Node</text>
  <text x="160" y="145" text-anchor="middle" fill="white" font-size="10">Camera/LiDAR</text>
  <text x="160" y="160" text-anchor="middle" fill="white" font-size="10">Publisher</text>

  <!-- Topic Bus -->
  <ellipse cx="400" cy="140" rx="80" ry="30" fill="#FFEB3B" stroke="#F57F17" stroke-width="2"/>
  <text x="400" y="145" text-anchor="middle" fill="#212121" font-size="12" font-weight="bold">/sensor_data</text>
  <text x="400" y="160" text-anchor="middle" fill="#212121" font-size="10">Topic</text>

  <!-- Subscriber Nodes -->
  <rect x="600" y="80" width="120" height="80" rx="10" ry="10" fill="#2196F3" stroke="#0D47A1" stroke-width="2"/>
  <text x="660" y="105" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Perception</text>
  <text x="660" y="125" text-anchor="middle" fill="white" font-size="10">Node</text>
  <text x="660" y="140" text-anchor="middle" fill="white" font-size="10">Subscriber</text>

  <rect x="600" y="200" width="120" height="80" rx="10" ry="10" fill="#2196F3" stroke="#0D47A1" stroke-width="2"/>
  <text x="660" y="225" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Logging</text>
  <text x="660" y="245" text-anchor="middle" fill="white" font-size="10">Node</text>
  <text x="660" y="260" text-anchor="middle" fill="white" font-size="10">Subscriber</text>

  <!-- Arrows showing communication -->
  <line x1="220" y1="140" x2="320" y2="140" stroke="#212121" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="270" y="130" text-anchor="middle" fill="#212121" font-size="10">Publish</text>

  <line x1="480" y1="140" x2="600" y2="120" stroke="#212121" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="540" y="115" text-anchor="middle" fill="#212121" font-size="10">Subscribe</text>

  <line x1="480" y1="140" x2="600" y2="240" stroke="#212121" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="540" y="190" text-anchor="middle" fill="#212121" font-size="10">Subscribe</text>

  <!-- Arrowhead definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#212121"/>
    </marker>
  </defs>

  <!-- Service Example -->
  <rect x="100" y="300" width="120" height="80" rx="10" ry="10" fill="#9C27B0" stroke="#4A148C" stroke-width="2"/>
  <text x="160" y="325" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Service</text>
  <text x="160" y="345" text-anchor="middle" fill="white" font-size="10">Server</text>
  <text x="160" y="360" text-anchor="middle" fill="white" font-size="10">(Request/Reply)</text>

  <rect x="600" y="300" width="120" height="80" rx="10" ry="10" fill="#FF9800" stroke="#E65100" stroke-width="2"/>
  <text x="660" y="325" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Service</text>
  <text x="660" y="345" text-anchor="middle" fill="white" font-size="10">Client</text>
  <text x="660" y="360" text-anchor="middle" fill="white" font-size="10">(Request/Reply)</text>

  <line x1="220" y1="340" x2="600" y2="340" stroke="#212121" stroke-width="2" stroke-dasharray="2,2" marker-end="url(#arrowhead2)"/>
  <text x="410" y="330" text-anchor="middle" fill="#212121" font-size="10">Request/Response</text>

  <!-- Arrowhead definition for services -->
  <defs>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#212121"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="40" y="420" width="720" height="60" fill="none" stroke="#BDBDBD" stroke-width="1"/>
  <rect x="60" y="440" width="20" height="20" fill="#4CAF50" stroke="#2E7D32" stroke-width="1"/>
  <text x="90" y="455" fill="#212121" font-size="10">Publisher Node</text>

  <rect x="200" y="440" width="20" height="20" fill="#2196F3" stroke="#0D47A1" stroke-width="1"/>
  <text x="230" y="455" fill="#212121" font-size="10">Subscriber Node</text>

  <rect x="370" y="440" width="20" height="20" fill="#FFEB3B" stroke="#F57F17" stroke-width="1"/>
  <text x="400" y="455" fill="#212121" font-size="10">Topic Bus</text>

  <rect x="510" y="440" width="20" height="20" fill="#9C27B0" stroke="#4A148C" stroke-width="1"/>
  <text x="540" y="455" fill="#212121" font-size="10">Service Server</text>

  <rect x="660" y="440" width="20" height="20" fill="#FF9800" stroke="#E65100" stroke-width="1"/>
  <text x="690" y="455" fill="#212121" font-size="10">Service Client</text>
</svg>